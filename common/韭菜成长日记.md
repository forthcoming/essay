必读:
1. 玩逐仓永续合约(一倍合约比现货手续费更低,不畏牛熊,还能在资金费率上做文章),不建议玩现货,不要玩现货杠杆(费率高+借币利息)
2. 玩杠杆可以不设止盈,但一定要设止损,一般止损价接近预估强平价,防止被爆仓, 委托止盈止损单建议分批下单, 市价全平不受止盈止损委托单影响,点击就会全部平仓,慎用
3. 永续合约下单之前一定要用计算器计算一下预估强评价,是否在接受范围内; 除个别特殊行情外,杠杆一定要10倍以内
4. 半夜不要玩合约, 一定要见好就收, 一次合约参考范围100u+, 一天参考范围200u+ 
5. 交易尽量用maker如限价委托,费率更低


maker(挂单): 买入价格小于卖1价格,或者卖出价格大于买1价格,这样的单子就不会立即成交,增加了市场深度
taker(吃单): 买入价格大于等于卖1价格,或者卖出价格小于等于买1价格,这样的单子就会立即与已挂出的委托单成交,减少了市场深度
市价委托基本都是taker; 市价委托根据委托价格与市价大小,买卖等因素,可能是taker或者maker或者他们的组合; 高级市价委托可选择只做maker, Limit IOC and Limit FOK orders (accessible via the API) are also always takers, for the same reason.
手续费率由账户类型,maker/taker共同决定,taker手续费率高于maker,现货手续费率高于期货(bnb,vip等级持有量也会影响到费率)
止盈止损中,所有买单委托价稍大于触发价格,所有卖单委托价稍小于触发价格,便于成交,委托价格就是成交价格,但大概率吃taker手续费  
币币交易过程中买卖双方都要付给交易所手续费,得到什么币种,收取买入币种的手续费 = 买入币种的数量 * 相应手续费率
u本位永续合约交易过程中开仓/平仓都要付给交易所手续费,收取usdt的手续费 = 面值 * 张数 * 开|平仓价 * 相应手续费率 (币本位合约手续费 = 面值 * 张数 / 开|平仓价 * 相应手续费率)
期货全称期货合约,除开/平仓手续费外还有资金费率,交易所通过资金费率调节合约价格,目的是让合约价格与现货价格趋同
如果资金费率为正,多方支付空方; 如果资金费率为负,空方支付给多方; 资金费每8小时结算一次,只有在结算时有仓位的用户才需要支付或收到资金费用; 资金费用 = 持仓仓位价值 * 当前资金费率


期现套利:
假设成本3000u,杠杆选2倍(最优,杠杆越高,资金利用率越大,也越容易爆仓)
资金费率走势(一般选eth) https://www.binance.com/zh-CN/futures/funding-history/1
现货买入2000u的eth; 期货2倍杠杆1000u做空eth,风险是eth价格上涨接近一倍时会爆仓,需提前设置止损
经计算2年内eth期现套利日收益率0.0226%左右


套期保值(杠杆选1倍):
如果u本位,做多,和现货一样除非币价归零否则不会爆仓; 做空,币价涨100%就爆仓
如果币本位,做多,币价跌50%爆仓; 做空永不爆仓,可用于套期保值; 
造成差异的根本原因是币本位收益是对应币,除了币本身数量变化外还会有币价影响
假设btc价格10000u,币本位用0.1个btc10倍杠杆做多btc,u本位用1000u10倍杠杆做多btc,btc平仓价11000u
u本位合约收益=(11000-10000)*1=1000u
币本位合约收益=(11000-10000)*1/11000 = 0.0909btc = 1000u, 保证金法币收益=(11000-10000)*0.1=100u
所以一般建议牛市用币本位,熊市用u本位


已实现盈亏: 平仓后的盈亏是已实现盈亏
未实现盈亏: 当前持有仓位,仓位的盈亏是未实现盈亏
标记价格 = 多个交易所最新现货价格的加权平均值
由于合约高杠杆性,往往交易量和波动性很大,为了避免价格高波动导致的不合理爆仓,交易所用标记价格计算未实现盈亏和预估强平价
盈亏只跟持仓量和开｜平仓价有关, 在持仓量和开仓价相同情况下,杠杆大小只影响初始保证金大小,杠杆越大,初始保证金越小,预估强平价越接近开仓价


面值是一张合约的价值,btc币本位合约面值是100美元,其他常见币种面值都是10美元, btc的u本位一张等于0.01btc
币本位开仓张数 = 保证金 * 杠杆倍数 * 开仓价 ／ 面值
u本位开仓张数 = 保证金 * 杠杆倍数 / (面值 * 开仓价)


币本位
多仓收益 = 面值 * 张数 / 开仓价(平仓价-开仓价)/平仓价 = 持仓量 *（平仓价-开仓价）/ 平仓价
空仓收益 = 面值 * 张数 / 开仓价(开仓价-平仓价)/平仓价 = 持仓量 * (开仓价-平仓价) / 平仓价
u本位
多仓收益 = 面值 * 张数 * (平仓价-开仓价) = 持仓量 *（平仓价-开仓价）
空仓收益 = 面值 * 张数 * (开仓价-平仓价) = 持仓量 *（开仓价-平仓价）


现货杠杆 VS 期货杠杆
杠杆可以用在现货, 也可以用在期货合约, 只要是杠杆就会存在爆仓
现货杠杆只能开三五倍而期货合约能开一百多倍, 其本质原因是现货杠杆是借币买币,涉及到借币利息, 有实际的币币交易, 手续费率也更高
期货合约加杠杆过程中用户都没有拿出真正本金,不需要借币,所以不存在借币利息


跟踪委托(https://www.binance.com/zh-CN/support/faq/360042299292)
當價格朝着有利方向變化時，跟蹤委託同時將以特定百分比移動。只要價格朝着有利於交易者的方向發展，它就能使交易保持開放，並持續獲利以鎖定收益。
跟蹤委託不會向相反方向移動。當價格沿相反方向以特定的百分比移動時，跟蹤委託將以市場價格平倉，或退出交易。
若用戶不填寫激活價格，激活價格的默認設置爲最新市場價格（取決於觸發類別爲最新合約價格或標記價格)。
設置買入跟蹤委託時，激活價格必須小於當前的市場價格。相反，激活價格必須大於市場價格才能設置賣出追蹤委託。
举个例子:
(1) 在多倉位設置“賣出跟蹤委託”    
![Image](https://github.com/forthcoming/essay/blob/master/common/%E8%B7%9F%E8%B8%AA%E5%A7%94%E6%89%98.png)    
BTCUSDT永續合約的最新合約價格爲10,000USDT。用戶設置“賣出跟蹤委託”條件如下：:
回調幅度: 5%
激活價格: 10,500 USDT
觸發: 最新合約價格
當最新合約價格升至10,000 USDT, 跟蹤委託價格是在9,500 USDT價位。
當最新合約價格升至10,500 USDT, 跟蹤委託價格也跟着上漲至 9,975 USDT [公式 = 最新合約價格* (1 - 回調幅度)]。
當最新合約價格下跌時，跟蹤委託因市場價格反向移動而停止移動。
當最新價格開始反彈上升達到最高價格時，跟蹤委託價格也尾隨上升至10,450 USDT。
當最新合約價格價格從最高價格下跌時，跟蹤委託因市場價格反向移動而再次停止移動。
當最新合約價格下跌超過5%，達到並超過10,450 USDT 的市價時，此跟蹤委託將被觸發且並以市場價位賣出。

以下條件被觸發:
激活價格 (10,500 USDT) < 最高價格 (11,000 USDT)   
反彈幅度 (9.09%) > 回調幅度 (5%)   
注:
反彈幅度 = (最高價格 - 反彈價格) / 最高價格 
 = (11,000 - 10,000) / 11,000
 = 9.09%

(2) 在多倉位設置“賣出跟蹤委託”
BTCUSDT永續合約的最新合約價格爲10,500USDT。用戶設置“賣出跟蹤委託”條件如下：:
回調幅度: 2%
激活價格: 11,000 USDT
觸發: 最新合約價格
情況（一）滿足兩個觸發條件
最新合約價格從10,500 USDT大幅度上漲至11,500 USDT，隨後下降至11,200 USDT。
賣出跟蹤委託將被觸發，委託價格以市場價格買入，兩個觸發條件被觸發如下:
激活價格 (11,000 USDT) < 最高價格 (11,500 USDT)    ---> 符合條件
反彈幅度 (2.61%) > 回調幅度 (2%)    ---> 符合條件
注:
反彈幅度 = (最高價格 - 反彈價格) / 最高價格 
 = (11,500 - 11,200) / 11,500
 = 2.61%
情況（二）只滿足其中一個觸發條件
最新合約價格從10,500 USDT大幅度上漲至11,500 USDT，隨後下降至11,450 USDT。
賣出跟蹤委託因不滿足其中一個觸發條件，而不會被觸發：
激活價格 (11,000 USDT) < 最高價格 (11,500 USDT)  ---> 符合條件
反彈幅度 (0.43%) < 回調幅度 (2%) ---> 不符合條件
注:
反彈幅度 = (最高價格 - 反彈價格) / 最高價格 
   = (11,500 - 11,450) / 11,500
   = 0.43%

(3) 在空倉位設置“買入跟蹤委託”
BTCUSDT永續合約的最新標記價格爲10,500USDT。用戶設置“買入跟蹤委託”條件如下：:
回調幅度: 3%
激活價格: 10,000 USDT
觸發: 標記價格
標記價格急劇下降從10,500 USDT至9,500 USDT (最低價格)，之後反彈至9800 USDT。
買入跟蹤委託將被觸發，委託價格以市場價格買入，兩個觸發條件被觸發如:
激活價格 (10,000 USDT) > 最低價格 (9,500 USDT)    ---> 符合條件
反彈幅度 (3.16%) > 回調幅度 (3%)    ---> 符合條件
注:
反彈幅度 = (反彈價格 - 最低價格) / 最低價格 
   = (9,800 - 9,500) / 9,500
   = 3.16%



