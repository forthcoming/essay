##### 相互独立事件  
事件A(或B)是否发生对事件B(A发生的概率没有影响,则{a,B} {A,b} {a,b}都是相互独立事件  
P(A∪B)=P(A)+P(B)－P(A)  
P(B)=1-p(a)p(b)  
P(AB)=P(A)P(B)  
P(B|A)=P(B)  
P(A|B)=P(A)  

---
##### 互斥事件  
事件A和B不可能同时发生即A∩B=Φ  
P(A∪B)=P(A)+P(B)    
P(AB)=0     
推论1: 设A1、A2、…、An互不相容,则P(A1+A2+...+ An)= P(A1) +P(A2) +…+ P(An)   
推论2: 设A1、A2、…、An构成完备事件组,则P(A1+A2+...+An)=1                 

---
##### 对立事件
A交B为不可能事件,A并B为必然事件,其含义是事件A和事件B必有一个且仅有一个发生.对立事件是互斥事件的特例  
P(A)=1-P(B)     

---
##### 条件概率
已知事件B出现的条件下A出现的概率称为条件概率,记作P(A|B)  
当P(A)>0,P(B|A)=P(AB)/P(A)  
当P(B)>0,P(A|B)=P(AB)/P(B)  
```python
假设有3张形状完全相同的卡片,第一张两面全红,第二张两面全黑,第三张一面红一面黑,
现随机选出一张并放在桌子上,发现这张卡片朝上一面是红,求另一面黑的概率.
from random import randrange
count=0
black=0
test=[('BLACK','BLACK'),('RED','RED'),('BLACK','RED')]
for i in range(1000000):
    index=randrange(0,3)
    top=randrange(0,2)
    if test[index][top]=='RED':
        count+=1
        if test[index][1-top]=='BLACK':
            black+=1
print(black/count)    # 1/3
```

---
##### 任意两个事件A与B
P(A∪B)=P(A)+P(B)－P(AB)  
P(A∪B|C)=P(A|C)+P(B|C)－P(AB|C)  
P(A∪B∪C)=P(A)+P(B)+P(C)－P(AB)－P(AC)－P(BC)+P(ABC)  
P(AB)=P(A)*P(B|A)=P(B)*P(A|B)  
P(ABC)=P(A)P(B|A)P(C|AB)  

---
##### 全概率公式
它将对一复杂事件A的概率求解问题转化为了在不同情况下发生的简单事件的概率的求和问题  
如果事件B1、B2、B3…Bn 构成一个完备事件组,即它们两两互不相容,其和为全集,并且P(Bi)大于0,则对任一事件A有  
P(A)=P(A|B1)P(B1) + P(A|B2)P(B2) + ... + P(A|Bn)P(Bn)或者p(A)=P(AB1)+P(AB2)+...+P(ABn).(A与Bn的关系为交)  
```python
高射炮向敌机发射三发炮弹,每弹击中与否相互独立且每发炮弹击中的概率均为0.3,
又知敌机若中一弹,坠毁的概率为0.2,若中两弹坠毁的概率为0.6,若中三弹敌机必坠毁,求敌机坠毁的概率.  
P(A1)=3*0.3*0.7^2=0.441  
P(A2)=3*0.3^2*0.7=0.189  
P(A3)=0.3^3=0.027  
P(B)=0.2*P(A1)+0.6*P(A2)+1*P(A3)=0.2286  
```

---
##### 贝叶斯(Bayes)公式
P(B|A) = P(A|B)*P(B) / P(A)
```python
一座别墅在过去的20年里一共发生过2次被盗,别墅的主人有一条狗平均每周晚上叫3次,
在盗贼入侵时狗叫的概率被估计为0.9,在狗叫的时候发生入侵的概率是多少?
假设A事件为狗在晚上叫,B为盗贼入侵
P(A) = 3/7
P(B) = 2/(20*365) = 2/7300
P(A|B) = 0.9
P(B|A) = 0.9*(2/7300) / (3/7) = 0.0005

现分别有A、B两个容器,在容器A里分别有7个红球和3个白球,在容器B里有1个红球和9个白球,
现已知从这两个容器里任意抽出了一个球且是红球,问这个红球是来自容器A的概率是多少?
假设已经抽出红球为事件B,从容器A里抽出球为事件A
P(B) = 8/20
P(A) = 1/2
P(B|A) = 7/10
P(A|B) = (7/10)*(1/2) / (8/20) = 7/8

装有10件某产品(其中一等品5件,二等品3件,三等品2件)的箱子中丢失一件产品,但不知是几等品,
今从箱中任取2件产品,结果都是一等品,则丢失的也是一等品的概率为?
假设Ai为丢失了i等品,B为Ai发生后从箱中任取2件产品都是一等品
P(A1)=1/2
P(A2)=3/10
P(A3)=1/5
P(B|A1)=C(2,4)/C(2,9)=1/6
P(B|A2)=C(2,5)/C(2,9)=5/18
P(B|A3)=C(2,5)/C(2,9)=5/18
P(B)=(1/12)+(1/12)+(1/18)=2/9
P(A1|B)=3/8
```

---
##### 伯努利概型
伯努利试验是一个有两种结果的简单试验,它的结果是成功或失败,黑或白,没有中间的立场  
单个伯努利试验是没有多大意义的,然而当我们反复进行伯努利试验,事情就变得有意义了,这些累计记录包含了很多潜在的非常有用的信息  
判断某种试验是否为伯努利试验的关键是:首先必须是重复的试验,而非一次试验;其次每次试验的结果同其他各次试验的结果无关  
设在一次试验中事件A发生的概率为p(0<p<1),则在n重伯努利试验中,事件A恰好发生k次的概率为: P=C(k,n)p^k*(1-p)^(n-k)  
```python
甲乙两运动员乒乓球比赛,甲每局胜概率0.6,乙每局胜概率0.4,比赛可采用三局两胜和五局三胜,哪种对甲有利
P1=.6^2+C(1,2)*.6*.4*.6=.648
P2=.6^3+C(2,3)*.6^2*.4*.6+C(2,4)*.6^2*.4^2*.6=.682
结论: 当胜率大于对方时,比赛的场次越多对自己越有利
```

---
##### 几何分布(离散型随机变量分布)
在n次伯努利试验中,试验k次才得到第一次成功的机率.详细的说是前k-1次皆失败,第k次成功的概率,记作X ~ G (p)  
E(X)=1/p

---
##### 泊松分布(离散型随机变量分布)
概率函数: P(X=k)=λ^k/(k!*e^λ)  
泊松分布的参数λ是单位时间(或单位面积)内随机事件的平均发生率  
当二项分布的n很大而p很小时,泊松分布可作为二项分布的近似,其中λ为np.通常当n≧20,p≦0.05时,就可以用泊松公式近似得计算.  
泊松分布适合于描述单位时间内随机事件发生的次数的概率分布.如汽车站台的候客人数、机器出现的故障数、自然灾害发生的次数等等.  
E(X)=D(X)=λ,因此只要知道他的方差or期望就能唯一确定他的分布  

---
##### 指数分布(连续型随机变量分布)
指数分布是泊松过程的事件间隔的分布  
f(x)=λ*e^(-λx)，F(x)=1-e^(-λx),x>0  # 注意原函数形式,容易出错  
E(X)=1/λ ; D(X)=1/λ^2 (λ>0且是常数)  
无记忆性: P(X>s+t|X>s)=e^(-λt)=P(X>t),若X表示某仪器的寿命,则上式说明若该仪器已使用s小时,他再能使用t小时的概率与s无关  

---
##### 正态分布(连续型随机变量分布)
若连续型随机变量X服从参数为μ、σ的概率分布,且其概率密度函数为  
![Image](https://github.com/forthcoming/essay/blob/master/ml/source/normal_distribution.jpg '标准正太分布函数')  
则这个随机变量就称为正态随机变量,正态随机变量服从的分布就称为正态分布  
正态分布有两个参数,即期望μ和标准差σ  
关于x=μ对称,在x=μ处达到极大值,σ越小,曲线在x=μ附近越陡峭(通过x=μ处的最大值来判断)  
当μ=0,σ=1时称为标准正态分布  
一般正态分布可化为标准正态分布(Z=[X-μ]/σ)来处理: P(a<X<=b)=F(b)-F(a)=Φ((b-μ)/σ)-Φ((a-μ)/σ)  
二维连续随机变量(X,Y)相互独立且X～N(μ1,σ1^2),Y～N(μ2,σ2^2),计算可知Z=X+Y仍服从正态分布且有Z～N(μ1+μ2,σ1^2+σ2^2)  
有限个相互独立的正态随机变量的线性组合C1X1+C2X2+...CnXn仍然服从正态分布  
由数学期望和方差性质可知C1X1+C2X2+...CnXn ~ N(∑Ciμi,∑Ci^2σi^2)  
n维正态分布的边缘分布仍然是正态分布,不依赖于参数ρ  

---
##### 二项分布(离散型随机变量分布)
重复n次独立的伯努利试验,是n个独立的是/非试验中成功的次数的离散概率分布,其中每次试验的成功概率为p  
n次独立重复试验中发生k次的概率P(ξ=k)= C(k,n) * p^k * (1-p)^(n-k)   
期望: Eξ=np,可以转化为n个相互独立的0-1分布来做,Xi表示第i次试验成功与否的随机变量  
方差: Dξ=np(1-p),证明见下图  
![Image](https://github.com/forthcoming/essay/blob/master/ml/source/binomial_distribution.png)  

---
##### 分布函数
设X是一个随机变量,x是任意实数,函数F(x)=P(X<=x)称为X的分布函数,有时也记为X ~ F(x)  
连续型随机变量取任意指定的实数值的概率都等于0  
仅仅由关于X和Y的边缘分布,一般是不能确定随机变量X,Y的联合分布函数  

---
##### 分布列
表示概率在所有的可能发生的情况中的分布  

---
##### 概率密度函数(密度函数)
设F(x)是随机变量X的分布函数,若存在非负可积函数f(x),使得对任意实数x有F(x)=∫(-∞,x)f(t)dt  
称X为连续型随机变量,称f(x)为X的概率密度函数,即落在宽为ε的小区间内的概率除以ε,在ε->0时的极限,f(x)≥0  
P(a<X<=b)=F(b)-F(a)=∫(a,b)f(x)dx  
P(X=c)=F(c)-F(c-0)=0  

---
##### 边缘分布
二维随机变量(X,Y)关于X的边缘分布函数等于F(x,∞)  
二维随机变量(X,Y)关于X的边缘概率密度等于∫(-∞,∞)f(x,y)dy  

---
##### 条件分布
设Y的边缘概率密度是f(y),当ε->0时  
P{X<=x|y<Y<=y+ε}  
=P{X<=x,y<Y<=y+ε}/P{y<Y<=y+ε}  
={∫(-∞,x)∫(y,y+ε)f(x,y)dydx}/∫(y,y+ε)f(y)dy  
=∫(-∞,x)f(x,y)/f(y)dx  
称f(x,y)/f(y)为在Y=y的条件下X的条件概率密度  
条件概率密度f(x|y)可能含0到2个变量,但在定义域内对x积分结果一定是1,但边缘概率密度f(x)一定只含一个变量x或直接是常数  

---
##### 均匀分布
若区间长度为L则概率密度f(x)=1/L  
若区间面积是A则概率密度f(x,y)=1/A  

---
##### 相互独立随机变量
设(X,Y)是连续性随机变量,f(x,y),f(x),f(y)分别为(X,Y)的概率密度和边缘概率密度  
则X和Y相互独立的充要条件是f(x,y)=f(x)*f(y)在平面上几乎处处成立  
给定了二维连续随机变量(X,Y)的联合概率密度,可以求的X,Y的边缘密度函数,进而可以验证X,Y是否相互独立  

---
##### 随机变量函数分布
设(X,Y)是连续性随机变量,f(x,y),F(x,y)分别为(X,Y)的概率密度和联合分布函数  
- Z=X+Y概率密度f(z)=∫(-∞,∞)f(z-y,y)dy=∫(-∞,∞)f(x,z-x)dx  
- Z=Y/X概率密度f(z)=∫(-∞,∞)|x|f(x,xz)dx  
- Z=X*Y概率密度f(z)=∫(-∞,∞)1/|x|f(x,z/x)dx  

根据推导公式计算时积分的范围根据具体x(或者z表示的x)和z表示的y(或者y)范围而定,有时候可能需要分段讨论,(-∞,∞)只是个大范围  
概率密度推导公式推导时一律将z看成常数,x,y范围看作无穷大,然后对P{Z≤z}先做积分,再对z求导即可推出公式  
推导公式一般规律是先用z替换掉其中的x或者y代换到f(x,y)中,再对被替换的x或者y关于z求导并取绝对值,对于其他形式则不适用,如圆形域  

设(X,Y)是相互独立连续随机变量X(x),Y(y)分别为X,Y的分布函数  
- M=max{X,Y}分布函数F(z)=P{M≤z}=P{X≤z,Y≤z}=P{X≤z}*P{Y≤z}=X(z)*Y(z)   
- N=min{X,Y}分布函数F(z)=P{N≤z}=1-P{X>z,Y>z}=1-P{X>z}*P{Y>z}=1-(1-X(z))(1-Y(z))   

这里用的是分布函数而非概率密度函数(当然可以用概率密度函数来做),并且要求X,Y相互独立,当不满足条件时只能按照定义对相应区域做积分即可  

---
##### 数学期望  
设Y是随机变量X的函数,Y=g(X),g是连续函数  
- 如果X是离散型随机变量,P{X=xk}=pk,k=1,2...,若∑g(xk)pk绝对收敛,则有E(Y)=E[g(X)]=∑g(xk)pk  
- 如果X是连续型随机变量,概率密度为f(x),若∫(-∞,+∞)g(x)f(x)dx绝对收敛,则有E(Y)=E[g(X)]=∫(-∞,+∞)g(x)f(x)dx  

上述定理可以推广到两个or多个随机变量函数的情况  
eg: Z=g(X,Y),g是连续函数,那么Z是一个一维随机变量,若二维随机变量概率密度是f(x,y)  
- 如果(X,Y)是连续性随机变量,则有E(Z)=E[g(X,Y)]=∫(-∞,+∞)(-∞,+∞)g(x,y)f(x,y)dxdy  
- 如果(X,Y)是离散性随机变量,则有E(Z)=E[g(X,Y)]=∑(j=1,∞)(i=1,∞)g(xi,yj)*Pij  

设C是常数,X、Y是两个随机变量,则有  
- E(C)=C  
- E(CX)=CE(X)  
- E(X+Y)=E(X)+E(Y) # 可以推广到任意有限个随机变量之和,根据随机变量定义可证  
- E(XY)=E(X)E(Y)   # 前提是(X,Y)不相关即ρ=0,两者等价,可以推广到任意有限个随机变量之积,根据随机变量定义可证  
- (X,Y)相互独立 => E(XY)=E(X)E(Y) <=> ρ=0  
```python
掷一枚均匀六面体骰子,求所有点数都出现所需要的抛掷次数
设Xi为出现i个点数后出现第i+1个点数所需要的次数的随机变量，i=0,1,2,3,4,5
E(Xi)=∑[(6-i)/6]*(i/6)^k=6/(6-i)
E(X)=∑E(Xi)=6/6+6/5+6/4+6/3+6/2+6/1=14.7

4个不同色的球放进4个盒子中,求空盒子个数的数学期望(类似还有装信问题,期望是1)
设Xi是第i个盒子是否为空的随机变量取值是0,1,i=1,2,3,4
E(Xi)=1*(3/4)^4
E(X)=∑E(Xi)=4*(3/4)^4=81/64
```

---
##### 方差(协方差在X=Y时的特例)  
设X是一个随机变量,若E{[X-E(X)]^2}存在,则称E{[X-E(X)]^2}为X的方差,用来度量随机变量X与均值E(X)的偏离程度,
是刻画X取值分散程度的一个量,由定义可知方差非负  
方差: D(X)=E{[X-E(X)]^2}=E(X^2)-[E(X)]^2  
标准差: σ(X)=√D(X)  
设C是常数,则有D(C)=0,D(CX)=C^2D(X)  
由定义可知方差就是随机变量X的函数g(X)=[X-E(X)]^2的数学期望  
- 如果X是离散型随机变量,P{X=xk}=pk,k=1,2...，则有D(X)=∑[xk-E(X)]^2*pk  
- 如果X是连续型随机变量,则有D(X)=∫(-∞,+∞)[X-E(X)]^2f(x)dx   

如果随机变量X的期望E(X)=μ,方差D(X)=σ^2!=0,随机变量Y=(X-μ)/σ    
则E(Y)=0，D(Y)=1,Y称为X的标准化变化   
如果X,Y不相关即ρ=0,则D(X+Y)=D(X)+D(Y),两者等价,否则D(X+Y)=D(X)+D(Y)+2Cov(X,Y)    

---
##### 协方差 & 相关系数    
E{[X-E(X)][Y-E(Y)]}称为随机变量X与Y的协方差,ρ为X与Y的线性相关系数   
Cov(X,Y)=E{[X-E(X)][Y-E(Y)]}=E(XY)-E(X)E(Y) 
ρ=Cov(X,Y)/[D(X)D(Y)]^.5,类似于余弦夹角公式  
- |ρ|<=1    
- |ρ|=1的充要条件是存在常数a,b使得p{Y=a+bX}=1,此时ρb>0    

如果协方差为正,说明X,Y同向变化,协方差越大说明同向程度越高,协方差负数说明X,Y反向变化,协方差越小说明反向程度越高    
如果X,Y相互独立,则Cov(X,Y)=0从而ρ=0即X,Y不相关，反之X,Y不相关，X和Y却不一定相互独立  
当(X,Y)服从二维正态分布时X和Y不相关等价于X和Y相互独立 

---
##### 协方差矩阵
设n维随机变量(X1,X2,...Xn)的二阶混合中心矩cij=Cov(Xi,Xj)=E{[Xi-E(Xi)][Xj-E(Xj)]}, i,j=1,2,...n    
则称矩阵C=∑∑cij是n维随机变量(X1,X2,...Xn)的协方差矩阵，且C是一个对称矩阵 

---
##### 切比雪夫(Chebyshev)不等式
设随机变量X具有E(X)=μ,D(X)=σ^2,则对于任意的正数ε,不等式P{|X-μ|≥ε}≤(σ/ε）^2
证:  
假设X是连续型随机变量,f(x)是概率密度函数 
则P{|X-μ|≥ε}=∫(|x-μ|≥ε)f(x)dx≤∫(|x-μ|≥ε)f(x)[(x-u)/ε]^2dx≤ε^-2∫(-∞,+∞)f(x)(x-u)^2dx=(σ/ε）^2
说明: 
切比雪夫不等式可用于只知道期望和方差,但不知道分布情况下P{|X-μ|≥ε}的界限   

---
##### 弱大数定律
设X1,X2...是独立同分布(彼此独立且有相同的分布函数)的随机变量序列,且E(Xk)=μ, 
则对于任意的ε>0,当n→∞时P{|[∑(1,n)Xk]/n-μ|<ε}=1,可以由切比雪夫不等式和夹逼定理证明    
弱大数定理说明当n很大时,n个随机变量的算术平均值在μ附近的概率接近1 
伯努利大数定律讲的是n次独立重复的伯努利试验,说明当n→∞时事件发生的频率等率事件发生的概率  

---
##### 中心极限定理
设随机变量X1,X2...Xn相互独立且期望和方差都存在,   
当n→∞时Z={∑(1,n)Xk-E[∑(1,n)Xk]}/{D[∑(1,n)Xk]}^.5近似的服从标准正态分布N(0,1) 
例如在任意指定时刻一个城市的耗电量是大量用户耗电量的总和    
一个物理实验测量误差是由许多可加的微小误差所合成的,他们往往近似服从正态分布  

---
##### 独立同分布中心极限定理
设随机变量X1,X2...Xn独立同分布,E(Xk)=μ,D(Xk)=σ^2>0,   
当n→∞时Z=(∑(1,n)Xk-nμ)/(σ*n^.5)近似的服从标准正态分布N(0,1)  
上式等价形式是X~N(μ,σ^2/n),其中X=[∑(1,n)Xk]/n    

---
##### De Moivre-Laplace定理
当分布函数是二项分布X~B(n,p)时,X=X1+X2+...+Xn,其中Xk相互独立且服从0-1分布 
由独立同分布中心极限定理得当n→∞时Z=(X-np)/[np(1-p)]^.5～N(0,1)  

---
##### 集合    
分配律:    
A∩(B∪C)=(A∩B)∪(A∩C)       
A∪(B∩C)=(A∪B)∩(A∪C) 
反演律:    
(A∪B)'=a∩b            
(A∩B)'=a∪b  

---
##### 组合数公式(在n个物品中选取m个物品)
C(m,n)= C(n-m,n)    
C(m,n+1)= C(m,n)+C(m-1,n)   
C(m,n)= n!/(n-m)!/m!    
C(0,n)+C(1,n)+...+C(n,n)=2^n    

---
##### 经典例题






